<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dungeon Scribe AI — Wireframe Prototype</title>
    <style>
      :root {
        --bg: #0f0d13;
        --panel: #17131e;
        --panel-alt: #1e1828;
        --text: #f4effa;
        --muted: #bdb3ce;
        --accent: #7a4df1;
        --accent-2: #a071f6;
        --success: #20c997;
        --warning: #f59f00;
        --danger: #ff6b6b;
        --border: rgba(255, 255, 255, 0.08);
        --shadow: 0 6px 24px rgba(0, 0, 0, 0.4);
        --radius: 16px;
        --radius-sm: 12px;
        --gap: 16px;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
          "Segoe UI Emoji";
        background: radial-gradient(
            1200px 800px at 20% -10%,
            #221a35 0%,
            #0f0d13 45%
          )
          fixed;
        color: var(--text);
      }
      a {
        color: inherit;
        text-decoration: none;
      }
      button {
        background: var(--panel-alt);
        border: 1px solid var(--border);
        color: var(--text);
        padding: 0.5rem 0.75rem;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: var(--shadow);
      }
      button[disabled] {
        opacity: 0.6;
        cursor: not-allowed;
      }
      button:hover:not([disabled]) {
        transform: translateY(-1px);
      }
      /* ========== Topbar ========== */
      header.topbar {
        position: sticky;
        top: 0;
        z-index: 5;
        backdrop-filter: blur(8px);
        background: linear-gradient(
          180deg,
          rgba(17, 15, 23, 0.9),
          rgba(17, 15, 23, 0.7)
        );
        border-bottom: 1px solid var(--border);
      }
      .topbar-inner {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0.75rem 1rem;
        display: flex;
        align-items: center;
        gap: 16px;
        justify-content: space-between;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 0.6rem;
        font-weight: 700;
        letter-spacing: 0.3px;
      }
      .gem {
        width: 28px;
        height: 28px;
        display: inline-grid;
        place-items: center;
        border-radius: 8px;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        box-shadow: 0 6px 20px rgba(122, 77, 241, 0.35),
          inset 0 0 24px rgba(255, 255, 255, 0.18);
        font-size: 0.95rem;
      }
      nav.main {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .main a {
        padding: 0.45rem 0.75rem;
        border-radius: 10px;
      }
      .main a:hover {
        background: var(--panel-alt);
      }
      /* Transcription controls */
      .tx {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        background: var(--panel);
        padding: 0.5rem 0.75rem;
        border-radius: 12px;
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
      }
      .tx .status {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.35rem 0.6rem;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: var(--panel-alt);
        font-size: 0.9rem;
        color: var(--muted);
      }
      .tx .dot {
        inline-size: 0.65rem;
        block-size: 0.65rem;
        border-radius: 50%;
        background: #6c6c6c;
        box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.06) inset;
      }
      .tx .controls {
        display: flex;
        gap: 0.4rem;
      }
      .tx .controls button {
        min-width: 2.4rem;
      }
      /* ========== Main layout ========== */
      .container {
        max-width: 1200px;
        margin: 1rem auto;
        padding: 0 1rem;
        display: grid;
        gap: var(--gap);
        grid-template-columns: 300px 1fr 380px;
        grid-template-rows: auto;
        grid-template-areas: "timeline log map";
      }
      aside.timeline {
        grid-area: timeline;
      }
      section.log {
        grid-area: log;
      }
      aside.map-panel {
        grid-area: map;
      }

      .panel {
        background: linear-gradient(180deg, var(--panel), #120e18);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .panel h2 {
        margin: 0;
        padding: 0.85rem 1rem;
        font-size: 1rem;
        letter-spacing: 0.2px;
        border-bottom: 1px solid var(--border);
        color: var(--muted);
        background: linear-gradient(
          180deg,
          rgba(122, 77, 241, 0.12),
          transparent
        );
      }
      /* Timeline */
      .timeline-body {
        padding: 1rem;
        display: grid;
        gap: 1rem;
      }
      .rail {
        position: relative;
        padding-left: 1rem;
        margin-left: 0.5rem;
      }
      .rail::before {
        content: "";
        position: absolute;
        left: 0.2rem;
        top: 0;
        bottom: 0;
        width: 2px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.12),
          rgba(255, 255, 255, 0.02)
        );
        border-radius: 2px;
      }
      .t-item {
        display: grid;
        grid-template-columns: 62px 1fr;
        gap: 0.5rem;
        align-items: start;
        padding: 0.5rem;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: var(--panel-alt);
      }
      .t-item time {
        color: var(--muted);
        font-size: 0.85rem;
      }
      .badge {
        display: inline-block;
        padding: 0.15rem 0.5rem;
        border-radius: 999px;
        font-size: 0.75rem;
        border: 1px solid var(--border);
        background: rgba(122, 77, 241, 0.15);
        color: #e6dcff;
      }
      .quests {
        display: grid;
        gap: 0.5rem;
      }
      .quest {
        padding: 0.5rem 0.75rem;
        background: var(--panel-alt);
        border: 1px solid var(--border);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.5rem;
        font-size: 0.95rem;
      }
      .quest small {
        color: var(--muted);
      }

      /* Log */
      .log-toolbar {
        display: flex;
        gap: 0.5rem;
        align-items: center;
        padding: 0.75rem;
        border-bottom: 1px solid var(--border);
        background: linear-gradient(
          180deg,
          rgba(122, 77, 241, 0.12),
          transparent
        );
      }
      .log-toolbar input {
        flex: 1;
        padding: 0.6rem 0.8rem;
        border-radius: 10px;
        background: #0f0b15;
        color: var(--text);
        border: 1px solid var(--border);
      }
      .messages {
        padding: 1rem;
        display: grid;
        gap: 0.75rem;
        max-height: 540px;
        overflow: auto;
      }
      .msg {
        display: grid;
        grid-template-columns: 48px 1fr;
        gap: 0.75rem;
        align-items: start;
      }
      .avatar {
        inline-size: 48px;
        block-size: 48px;
        border-radius: 12px;
        display: grid;
        place-items: center;
        font-weight: 700;
        background: linear-gradient(135deg, #2c2640, #362c52);
        border: 1px solid var(--border);
      }
      .bubble {
        background: var(--panel-alt);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 0.6rem 0.75rem;
      }
      .meta {
        font-size: 0.8rem;
        color: var(--muted);
        margin-bottom: 0.15rem;
      }

      /* Map */
      .map-viewport {
        aspect-ratio: 4 / 3;
        width: 100%;
        background: radial-gradient(800px 500px at 60% 30%, #231b37, #151021);
        border-top: 1px solid var(--border);
      }
      .legend {
        display: flex;
        gap: 0.5rem;
        padding: 0.6rem 1rem;
        align-items: center;
        border-top: 1px solid var(--border);
        color: var(--muted);
      }
      .pin {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--accent);
        box-shadow: 0 0 0 2px rgba(122, 77, 241, 0.35);
      }
      svg.map {
        width: 100%;
        height: 100%;
      }
      .map-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 0;
        padding: 0.85rem 1rem;
        font-size: 1rem;
        color: var(--muted);
        border-bottom: 1px solid var(--border);
        background: linear-gradient(
          180deg,
          rgba(122, 77, 241, 0.12),
          transparent
        );
      }

      /* Characters */
      footer.characters {
        max-width: 1200px;
        margin: 0.5rem auto 2rem;
        padding: 0 1rem;
      }
      .card-row {
        display: grid;
        grid-auto-flow: column;
        grid-auto-columns: minmax(240px, 1fr);
        gap: var(--gap);
        overflow: auto;
        padding-bottom: 0.5rem;
      }
      .card {
        background: linear-gradient(180deg, var(--panel), #120e18);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 1rem;
        display: grid;
        gap: 0.75rem;
        min-height: 160px;
      }
      .card .top {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
      .token {
        inline-size: 52px;
        block-size: 52px;
        border-radius: 50%;
        display: grid;
        place-items: center;
        font-weight: 800;
        background: radial-gradient(circle at 30% 25%, #3b2b5f, #201734);
        border: 2px solid rgba(255, 255, 255, 0.15);
      }
      .pill {
        display: inline-block;
        padding: 0.2rem 0.5rem;
        border-radius: 999px;
        border: 1px solid var(--border);
        font-size: 0.75rem;
        color: var(--muted);
      }
      .stats {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }
      .hp {
        color: #f03e3e;
      }
      .ac {
        color: #22b8cf;
      }
      .speed {
        color: #51cf66;
      }
      .actions {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }
      .actions button {
        padding: 0.45rem 0.6rem;
      }

      /* Responsive */
      @media (max-width: 1100px) {
        .container {
          grid-template-columns: 260px 1fr 320px;
        }
      }
      @media (max-width: 930px) {
        .container {
          grid-template-columns: 1fr;
          grid-template-areas: "log";
        }
        aside.timeline,
        aside.map-panel {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- ======= Top Navigation ======= -->
    <header class="topbar" role="banner">
      <div class="topbar-inner">
        <div class="brand" aria-label="App brand">
          <span class="gem">◆</span>
          <span>Dungeon Scribe AI</span>
        </div>

        <nav class="main" aria-label="Primary">
          <a href="#" aria-current="page">Inventory</a>
          <a href="#">Quests</a>
          <a href="#">Characters</a>
        </nav>

        <section class="tx" role="region" aria-label="Transcription controls">
          <div class="status" aria-live="polite">
            <span class="dot" id="tx-dot" aria-hidden="true"></span>
            <span id="tx-state">Idle</span>
          </div>
          <div class="controls">
            <button
              id="btn-start"
              title="Start recording (S)"
              aria-pressed="false"
            >
              ▶
            </button>
            <button id="btn-pause" title="Pause/Resume (P)" disabled>⏸</button>
            <button id="btn-stop" title="Stop recording (X)" disabled>⏹</button>
          </div>
        </section>
      </div>
    </header>

    <!-- ======= Main Layout ======= -->
    <div class="container">
      <!-- Left: Timeline + Quests -->
      <aside class="timeline panel" aria-label="Session timeline">
        <h2>Timeline & Questline</h2>
        <div class="timeline-body">
          <div class="rail">
            <article class="t-item">
              <time datetime="19:02">19:02</time>
              <div>
                <div>
                  <span class="badge">Scene</span> Party enters the coastal town
                  of Greywatch.
                </div>
                <small class="meta">DM • Location set • Weather: fog</small>
              </div>
            </article>
            <article class="t-item">
              <time datetime="19:11">19:11</time>
              <div>
                <div>
                  <span class="badge">Event</span> Kyra casts
                  <em>Detect Magic</em> near the docks.
                </div>
                <small class="meta">Kyra • Arcana check 15</small>
              </div>
            </article>
            <article class="t-item">
              <time datetime="19:25">19:25</time>
              <div>
                <div>
                  <span class="badge">Quest</span> New lead: “Missing
                  Fishermen”.
                </div>
                <small class="meta">Added to Journal</small>
              </div>
            </article>
          </div>

          <div class="quests">
            <div class="quest">
              <div>🔎 Missing Fishermen</div>
              <small>Active • Difficulty: Medium</small>
            </div>
            <div class="quest">
              <div>⭐ Lighthouse Beacon</div>
              <small>Side • Difficulty: Easy</small>
            </div>
          </div>
        </div>
      </aside>

      <!-- Center: Conversation Log -->
      <section class="log panel" aria-label="Conversation log">
        <div class="log-toolbar">
          <input
            type="search"
            placeholder="Search actions, rolls, or dialogue…"
            aria-label="Search log"
          />
          <button title="Filter">Filter</button>
          <button title="Export">Export</button>
        </div>

        <div class="messages" id="log">
          <div class="msg">
            <div class="avatar">DM</div>
            <div class="bubble">
              <div class="meta">19:01 • Scene</div>
              The fog clings to the docks of Greywatch. Lanterns burn low as
              gulls cry overhead.
            </div>
          </div>

          <div class="msg">
            <div class="avatar">K</div>
            <div class="bubble">
              <div class="meta">19:11 • Action</div>
              Kyra examines the crates and whispers a quick detection spell.
            </div>
          </div>

          <div class="msg">
            <div class="avatar">T</div>
            <div class="bubble">
              <div class="meta">19:18 • Dialogue</div>
              Thorne: “If the fishers are missing, someone’s hiding tracks.
              Let’s split and ask around.”
            </div>
          </div>

          <div class="msg">
            <div class="avatar">S</div>
            <div class="bubble">
              <div class="meta">19:25 • System</div>
              <em>Quest added:</em> Missing Fishermen — speak to the
              harbormaster.
            </div>
          </div>
        </div>
      </section>

      <!-- Right: Map -->
      <aside class="map-panel panel" aria-label="World map">
        <h3 class="map-title">🗺️ Map</h3>
        <div class="map-viewport">
          <!-- Minimal, stylised fantasy map (inline SVG, no external assets) -->
          <svg
            class="map"
            viewBox="0 0 800 600"
            role="img"
            aria-label="Fantasy map with islands and pins"
          >
            <defs>
              <linearGradient id="water" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#1e1531" />
                <stop offset="100%" stop-color="#120c21" />
              </linearGradient>
              <linearGradient id="land" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#3b2e55" />
                <stop offset="100%" stop-color="#2c2243" />
              </linearGradient>
            </defs>
            <rect x="0" y="0" width="800" height="600" fill="url(#water)" />
            <!-- Islands -->
            <path
              d="M130,260 C100,200 190,190 240,210 C290,230 320,270 280,310 C240,350 170,340 130,300 Z"
              fill="url(#land)"
              stroke="#6c5fa3"
              stroke-opacity=".5"
            />
            <path
              d="M420,170 C380,130 520,120 560,170 C600,220 590,260 540,280 C490,300 460,230 420,170 Z"
              fill="url(#land)"
              stroke="#6c5fa3"
              stroke-opacity=".5"
            />
            <path
              d="M520,360 C480,330 610,330 650,380 C690,430 640,470 590,470 C540,470 560,400 520,360 Z"
              fill="url(#land)"
              stroke="#6c5fa3"
              stroke-opacity=".5"
            />
            <!-- Pins -->
            <g>
              <circle cx="250" cy="260" r="6" fill="#7a4df1" />
              <text x="260" y="255" fill="#eae0ff" font-size="12">
                Greywatch
              </text>
            </g>
            <g>
              <circle cx="560" cy="200" r="6" fill="#7a4df1" />
              <text x="570" y="195" fill="#eae0ff" font-size="12">
                Whisper Reefs
              </text>
            </g>
            <g>
              <circle cx="600" cy="420" r="6" fill="#7a4df1" />
              <text x="610" y="415" fill="#eae0ff" font-size="12">
                Old Lighthouse
              </text>
            </g>
          </svg>
        </div>
        <div class="legend"><span class="pin"></span> Points of Interest</div>
      </aside>
    </div>

    <!-- ======= Character Cards ======= -->
    <footer class="characters" aria-label="Character cards">
      <div class="card-row">
        <article class="card" aria-label="Character Kyra card">
          <div class="top">
            <div class="token">K</div>
            <div>
              <div>
                <strong>Kyra</strong> <span class="pill">Warlock L1</span>
              </div>
              <div class="stats">
                <span class="pill hp">HP 10</span>
                <span class="pill ac">AC 12</span>
                <span class="pill speed">30 ft</span>
              </div>
            </div>
          </div>
          <div class="actions">
            <button>Eldritch Blast</button><button>Hex</button
            ><button>Short Rest</button>
          </div>
        </article>

        <article class="card" aria-label="Character Thorne card">
          <div class="top">
            <div class="token">T</div>
            <div>
              <div>
                <strong>Thorne</strong> <span class="pill">Rogue L1</span>
              </div>
              <div class="stats">
                <span class="pill hp">HP 9</span>
                <span class="pill ac">AC 14</span>
                <span class="pill speed">30 ft</span>
              </div>
            </div>
          </div>
          <div class="actions">
            <button>Sneak Attack</button><button>Hide</button>
          </div>
        </article>

        <article class="card" aria-label="Character Seren card">
          <div class="top">
            <div class="token">S</div>
            <div>
              <div>
                <strong>Seren</strong> <span class="pill">Cleric L1</span>
              </div>
              <div class="stats">
                <span class="pill hp">HP 11</span>
                <span class="pill ac">AC 18</span>
                <span class="pill speed">30 ft</span>
              </div>
            </div>
          </div>
          <div class="actions">
            <button>Guiding Bolt</button><button>Heal</button>
          </div>
        </article>

        <article class="card" aria-label="Character Mira card">
          <div class="top">
            <div class="token">M</div>
            <div>
              <div>
                <strong>Mira</strong> <span class="pill">Wizard L1</span>
              </div>
              <div class="stats">
                <span class="pill hp">HP 8</span>
                <span class="pill ac">AC 13</span>
                <span class="pill speed">30 ft</span>
              </div>
            </div>
          </div>
          <div class="actions">
            <button>Magic Missile</button><button>Shield</button>
          </div>
        </article>
      </div>
    </footer>

    <script>
      // Simple Start/Pause/Stop state machine for transcription controls
      const stateEl = document.getElementById('tx-state');
      const dotEl = document.getElementById('tx-dot');
      const btnStart = document.getElementById('btn-start');
      const btnPause = document.getElementById('btn-pause');
      const btnStop = document.getElementById('btn-stop');
      const logEl = document.getElementById('log');

      let txState = 'idle'; // 'idle' | 'recording' | 'paused'

      const setState = (next) => {
        txState = next;
        if (next === 'recording'){
          stateEl.textContent = 'Recording';
          dotEl.style.background = getComputedStyle(document.documentElement).getPropertyValue('--success');
          btnStart.setAttribute('aria-pressed','true');
          btnPause.disabled = false;
          btnStop.disabled = false;
        } else if (next === 'paused'){
          stateEl.textContent = 'Paused';
          dotEl.style.background = getComputedStyle(document.documentElement).getPropertyValue('--warning');
          btnStart.setAttribute('aria-pressed','false');
          btnPause.disabled = false;
          btnStop.disabled = false;
        } else {
          stateEl.textContent = 'Idle';
          dotEl.style.background = '#6c6c6c';
          btnStart.setAttribute('aria-pressed','false');
          btnPause.disabled = true;
          btnStop.disabled = true;
        }
      };

      const addLog = (meta, text) => {
        const wrap = document.createElement('div');
        wrap.className = 'msg';
        wrap.innerHTML = \`
          <div class="avatar">S</div>
          <div class="bubble">
            <div class="meta">\${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})} • \${meta}</div>
            \${text}
          </div>\`;
        logEl.appendChild(wrap);
        logEl.scrollTop = logEl.scrollHeight;
      };

      btnStart.addEventListener('click', () => {
        if (txState === 'idle' || txState === 'paused'){
          setState('recording');
          addLog('System', '<em>Transcription started.</em>');
        }
      });

      btnPause.addEventListener('click', () => {
        if (txState === 'recording'){ setState('paused'); addLog('System', '<em>Transcription paused.</em>'); }
        else if (txState === 'paused'){ setState('recording'); addLog('System', '<em>Transcription resumed.</em>'); }
      });

      btnStop.addEventListener('click', () => {
        if (txState !== 'idle'){ setState('idle'); addLog('System', '<em>Transcription stopped.</em>'); }
      });

      // Keyboard shortcuts
      window.addEventListener('keydown', (e)=>{
        if (e.key.toLowerCase() === 's') btnStart.click();
        if (e.key.toLowerCase() === 'p') btnPause.click();
        if (e.key.toLowerCase() === 'x') btnStop.click();
      });
    </script>
  </body>
</html>
